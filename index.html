<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Tarjeta de Presentación</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #80003F 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .card-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 100%;
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, #80003F 0%, #764ba2 100%);
            padding: 40px 30px;
            text-align: center;
            color: white;
        }

        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            /* Fondo blanco puro */
            background: white;
            margin: 0 auto 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            overflow: hidden;
            padding: 0;
        }

        /* REGLA CSS para el logo */
        .profile-image img {
            /* REVERTIDO: Volvemos al 100% para que el logo sin fondo se ajuste correctamente al círculo blanco */
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        /* FIN REGLA CSS */

        .name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .title {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 300;
        }

        .card-body {
            padding: 30px;
        }

        .description {
            font-size: 14px;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
            text-align: center;
        }

        .contact-section {
            margin-bottom: 25px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: #333;
        }

        .contact-item i {
            width: 25px;
            color: #80003F;
            font-size: 16px;
        }

        .contact-item a {
            color: #80003F;
            text-decoration: none;
            transition: color 0.3s;
        }

        .contact-item a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .social-link {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #80003F;
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 15px rgba(128, 0, 63, 0.1);
            font-size: 18px;
        }

        .social-link:hover {
            background: linear-gradient(135deg, #80003F 0%, #c2005a 100%);
            color: white;
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 25px rgba(128, 0, 63, 0.4);
        }

        /* --- Estilos para el botón de VCard --- */
        .vcard-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 25px; /* Restauramos la separación anterior */
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #80003F, #A42C74); /* Degradado más intenso */
            color: white;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.1s ease;
            box-shadow: 0 6px 15px rgba(128, 0, 63, 0.4);
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .vcard-button:hover {
            background: linear-gradient(45deg, #A42C74, #80003F);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(128, 0, 63, 0.6);
        }

        .vcard-button:active {
            transform: translateY(0);
        }
        /* ------------------------------------- */

        /* ELIMINAMOS EL ESTILO DEL BOTÓN GRANDE DE WHATSAPP */

        .footer {
            text-align: center;
            padding: 15px;
            background: #f9f9f9;
            font-size: 12px;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="card-container">
        <div class="card-header">
            <div class="profile-image">
                <img src="https://i.ibb.co/XrvB82S9/logo-separado-png-sin-fonfo.png"
                    alt="Logo de ES Estètica Professional"
                    onerror="this.onerror=null;this.src='https://placehold.co/120x120/80003F/ffffff?text=Error+Logo';">
            </div>
            <div class="name">ES Estètica Professional</div>
            <div class="title">Eva Sánchez</div>
        </div>

        <div class="card-body">
            <div class="description">
                Estética avanzada y terapias de piel con 30 años de experiencia, enfocadas en tu Belleza, Salud y Bienestar.
            </div>

            <div class="contact-section">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <a href="tel:+34611106981">+34 611 10 69 81</a>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:esesteticaprofessional@gmail.com">esesteticaprofessional@gmail.com</a>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Calle Aragó 3-5ºA, 12540 Vila-real, Castellón</span>
                </div>
            </div>

            <button class="vcard-button" onclick="generateVCardAndDownload()">
                <i class="fas fa-address-card"></i>
                Guardar Contacto
            </button>
            
            <div class="social-links">
                <a href="https://wa.me/34611106981?text=Hola."
                    class="social-link" title="Contactar por WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>

                <a href="https://esesteticaprofesional.com/" class="social-link" title="Sitio Web">
                    <i class="fas fa-globe"></i>
                </a>
                <a href="https://www.instagram.com/es_esteticaeva/" class="social-link" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.facebook.com/es.esteticaprofessional" class="social-link" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.google.com/search?sca_esv=8ec2f2260aee0977&sxsrf=AE3TifOzh9UzgQGua2u5b4geooMd__VaoA:1760913371852&si=AMgyJEtREmoPL4P1I5IDCfuA8gybfVI2d5Uj7QMwYCZHKDZ-EwZs7wPFaeXaJVEMwcyG3-5nxPwPezX2BeFFAO8smq3pVcaUGGDbgiX6YrtkmqX2kcISlNwY9vWN7lgwsP9iexr0NzbWEyUiUWjuBgBlouuG-1-brw%3D%3D&q=ES+est%C3%A8tica+professional+Rese%C3%B1as&sa=X&ved=2ahUKEwjnuonAqbGQAxUwSfEDHV0_CeoQ0bkNegQITBAE&biw=1920&bih=957&dpr=1" class="social-link" title="Google Reseñas">
                    <i class="fab fa-google"></i>
                </a>
            </div>
        </div>

        <div class="footer">
            ES Estètica Professional - Tu Tarjeta Digital
        </div>
    </div>

    <script>
        function generateVCardAndDownload() {
            const fullName = "ES Estètica Professional";
            const organization = "ES Estètica Professional";
            const title = "Estética avanzada y terapias de piel";
            const phone = "+34611106981";
            const email = "esesteticaprofessional@gmail.com";

            // Dirección para el VCard (Calle;Ciudad;Provincia;Código Postal;País)
            const address = "Calle Aragó 3-5ºA;Vila-real;Castellón;12540;España";

            // Enlaces de redes sociales y web
            const instagramUrl = "https://www.instagram.com/es_esteticaeva/";
            const facebookUrl = "https://www.facebook.com/es.esteticaprofessional";
            const websiteUrl = "https://esesteticaprofesional.com/"; 
            
            // URL de la imagen de perfil (logo)
            const imageUrl = "https://i.ibb.co/XrvB82S9/logo-separado-png-sin-fonfo.png";

            // Función para obtener la imagen como Base64 (asíncrona)
            function getBase64Image(url) {
                return new Promise((resolve, reject) => {
                    fetch(url)
                        .then(response => {
                            if (!response.ok) throw new Error('Error al cargar la imagen');
                            return response.blob();
                        })
                        .then(blob => {
                            const reader = new FileReader();
                            reader.onloadend = () => {
                                // Obtener solo la parte Base64, quitando el prefijo
                                const base64String = reader.result.split(',')[1]; 
                                resolve(base64String);
                            };
                            reader.onerror = reject;
                            reader.readAsDataURL(blob);
                        })
                        .catch(reject);
                });
            }

            // Iniciar el proceso de descarga de la imagen y creación del VCard
            getBase64Image(imageUrl).then(base64data => {
                const vCardContent = [
                    "BEGIN:VCARD",
                    "VERSION:3.0",
                    `FN:${fullName}`,
                    `N:Estètica;Eva Sánchez;;;`,
                    `ORG:${organization}`,
                    `TITLE:${title}`,
                    // PHOTO: Campo para incrustar la imagen en Base64
                    // IMPORTANTE: Se asume que el logo es PNG por la extensión de tu URL
                    `PHOTO;TYPE=PNG;ENCODING=B:${base64data}`, 
                    `TEL;TYPE=WORK,VOICE:${phone}`,
                    `EMAIL;TYPE=PREF,INTERNET:${email}`,
                    `ADR;TYPE=WORK:;;${address}`,

                    // Campos URL para redes sociales y web
                    `URL;TYPE=Website:${websiteUrl}`,
                    `URL;TYPE=Instagram:${instagramUrl}`,
                    `URL;TYPE=Facebook:${facebookUrl}`,

                    "END:VCARD"
                ].join('\n');

                // Crear y descargar el Blob (archivo .vcf)
                const blob = new Blob([vCardContent], { type: 'text/vcard;charset=utf-8' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = 'ES_Estetica_Professional.vcf';
                
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);

            }).catch(error => {
                console.error("Error al generar la VCard. Puede que haya un problema con la imagen:", error);
                alert("Hubo un error al generar la tarjeta de contacto. Por favor, inténtalo de nuevo. Asegúrate de que la URL de la imagen es correcta.");
            });
        }
    </script>
</body>
</html>
